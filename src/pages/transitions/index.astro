---
import Base from "../../layouts/Base.astro";
import Navbar from "../../components/Navbar.astro";

import albuns from "../../data/albums.json";
---

<head>
  <title>View Transition API - Laboratório de Web APIs</title>
</head>

<Base>
  <Navbar />

  <h1 class="mt-4 font-bold text-3xl" transition:name="experiment-ViewTransition">View Transition API</h1>

  <p class="mt-2">
    A API de transição de Views fornece um mecanismo para criar facilmente
    transições animadas entre diferentes estados da DOM, ao mesmo tempo em que
    atualiza o conteúdo em um único passo.
  </p>
  <p class="mt-2">
    Esse projeto usa a integração do Astro com o View Transitions API para criar
    animações de transição entre as páginas. Você pode fazer também usando
    Javascript padrão seguindo um tutorial no
    <a
      class="text-cyan-600 font-semibold hover:underline"
      href="https://developer.chrome.com/docs/web-platform/view-transitions/"
      target="_blank">Chrome Developer Docs</a
    > ou usando frameworks como o <a
      href="https://docs.astro.build/en/guides/view-transitions/"
      target="_blank"
      class="text-cyan-600 font-semibold hover:underline">Astro</a
    > (disponível acima da versão 2.9 usando a feature flag <code
      >experimental.viewTransitions</code
    >)
  </p>

  <p class="mt-2">
    Alguns bugs observados durante o desenvolvimento foram coisas como
    codificação de caracteres quebrando, efeitos de transição não funcionando,
    entre outros. Mas, é algo que passa batido se levarmos em consideração
    que estamos trabalhando com uma API em desenvolvimento.
  </p>

  <a
    class="text-cyan-600 font-semibold hover:underline"
    href="https://developer.mozilla.org/en-US/docs/Web/API/BarcodeDetector"
    target="_blank">Documentação no MDN (em inglês)</a
  >

  <h2 class="mt-4 font-bold text-2xl">Exemplo</h2>
  <hr class="dark:border-neutral-700 my-2" />

  <p class="mt-2">
    Selecione qualquer capa de álbum para ver a lista de faixas:
  </p>

  <section
    class="grid grid-cols-2 sm:grid-cols-3 gap-x-2 gap-y-5 space-between mt-4"
  >
    {
      albuns.map((album) => (
        <a href={`/transitions/${album.slug}`}>
          <img
            src={album.cover}
            alt={album.name}
            class="bg-neutral-400 dark:bg-neutral-900 rounded-md aspect-square"
            transition:name={`album-cover-${album.slug}`}
          />
          <h3
            class="font-medium dark:text-neutral-300 text-neutral-700 text-md mt-2 leading-tight line-clamp-2"
            transition:name={`album-name-${album.slug}`}
          >
            {album.name}
          </h3>
          <p
            class="text-neutral-500 dark:text-neutral-400 text-sm font-medium"
            transition:name={`album-artist-${album.slug}`}
          >
            {album.artist}
          </p>
        </a>
      ))
    }
  </section>
</Base>
